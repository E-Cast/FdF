Input:
   rgb1
   rgb2
   ratio
Declared
   norm1
   norm2
   new_rgb
   brightness
   intensity
Algorithm
   norm1 = normalize rgb1
   norm2 = normalize rgb2
   norm1 = sRGBInverseCompanding norm1
   norm2 = sRGBInverseCompanding norm2
   new_rgb = LinearInterpolation norm1 norm2 ratio
   brightness = LinearInterpolation(pow(norm1, gamma), pow(norm2, gamma), mix)
   intensity = pow(brightness, 1 / gamma)
   if (new_rgb != 0)
      rgb = rgb * factor
   return (sRGBCompanding(rgb))